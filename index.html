<html>
<head>
   <title>Timeline demo</title>

   <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.4.2/pure-min.css">
   <script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization',
       'version':'1','packages':['timeline','corechart']}]}"></script>

   <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
   <script src="/js" type="text/javascript" ></script>

   <script type="text/javascript">

     $(function() {
     	var currentMode = profiler.timings;

      $text = $("#text");

     $text.val(localStorage["text"]);
     	
	      $('input[type="radio"]').change(function() {
	      	var mode = $('input[type="radio"]:checked').val();
	      	currentMode = profiler[mode];
	      });

	      $("#start").click(function(e){
	          $.get("/start");
	      });

	      $("#stop").click(function(e){
	          $.get("/stop");
	      });
	     
	     $("#clear").click(function(e){
	           $text.val("");
	      });

	     $("#cleanup").click(function(e){
	          $text.val(currentMode.cleanup($text.val()));
	      });

	      $("#load").click(function(e){
	          $.get("/log").done(function(data)
	            {
	              var text = $text.val();
	              $text.val(text +data)
	            });
	      });
	 	
	 	$("#load_file").click(function(e){
	          $.get("/file").done(function(data)
	            {
	              var text = $text.val();
	              $text.val(text + currentMode.cleanup(data))
	            });
	      });
		$("#parse").click(function(e) {
			e.preventDefault();
			var text = $text.val();
			localStorage["text"] = text;
			currentMode.parse(text);
		});

		$("#parse_memory").click(function(e) {
			e.preventDefault();
			var text = $text.val();
			localStorage["text"] = text;
			currentMode.parse(text);
		});
     })

     


     
    </script>
</head>

<body>

      <pre> Format is [timestamp] [start|finish]: [operation name] [aditional data: url/index ...]</pre>
      <form class="pure-form pure-input-1">
        <textarea id="text" style="width: 100%; height: 500px" spellcheck="false">
        </textarea>
      </form>
       
      <div class="pure-menu pure-menu-open pure-menu-horizontal">
      <ul>
      		<li>Mode: 
      			<input type="radio" name="mode" value="timings" checked="">Timings</input>
      			<input type="radio" name="mode" value="memory">Memory</input>
      		</li>
          <li><a href="#" class="pure-button" id="parse">Parse</a></li>
          <li><a href="#" class="pure-button" id="load_file">Load file.log</a></li>

          <li><a href="#" class="pure-button" id="load">Load output</a></li>

          <li><a href="#" class="pure-button" id="start">Start log</a></li>
          <li><a href="#" class="pure-button" id="stop">Stop log</a></li>
          <li><a href="#" class="pure-button" id="clear">Clear</a></li>
          <li><a href="#" class="pure-button" id="cleanup">Cleanup</a></li>
      </ul>
      <div id="mytimeline" class="pure-u-1-1" style="width:95%;  margin: 10px"></div>
</body>
</html>
